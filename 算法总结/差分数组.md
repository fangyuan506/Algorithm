# 差分数组

差分数组是一个辅助数组，从侧面来表示给定某一数组的变化，一般用来对数组进行区间修改的操作。

我们首先构造一个差分数组示例：d[i] = a[i] - a[i-1]

| 下标 i        | 0    | 1    | 2    | 3    | 4    | 5    | 6    | 7    |
| ------------- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| 原始数组 a[i] | 8    | 4    | 6    | 7    | 9    | 3    | 1    | 5    |
| 差分数组 d[i] | 8    | -4   | 2    | 1    | 2    | -6   | -2   | 4    |

我们可以看到原数组就是差分数组的前缀和，a[3] = d[0] + d[1] + d[2] + d[3]。

下面对区间 [1,4] 的数值全部加上3

| 下标 i        | 0    | 1       | 2         | 3         | 4         | 5       | 6    | 7    |
| ------------- | ---- | ------- | --------- | --------- | --------- | ------- | ---- | ---- |
| 原始数组 a[i] | 8    | 4+3=7   | 6+3=9     | 7+3=10    | 9+3=12    | 3       | 1    | 5    |
| 差分数组 d[i] | 8    | -4+3=-1 | 2（不变） | 1（不变） | 2（不变） | -6-3=-9 | -2   | 4    |

这时我们就会发现这样一个规律，当对一个区间进行增减某个值的时候，他的差分数组对应的区间左端点的值会同步变化，而他的右端点的后一个值则会相反地变化。

所以有了差分数组，如果对区间 [a,b] 每个元素加 v ，不需要在一个个操作，只需要在两端修改即可；而还原原数组，也只需要计算差分数组前 n 项的和。

